jQuery(function(a){function b(){const a=e.val();d.hide(),d.filter(`[data-tax-class=\'${a}\']`).show()}function c(){const b=a(".edi-tax-class-select").val();a.get(wpo_ips_edi.ajaxurl,{action:"wpo_ips_edi_reload_tax_table",nonce:wpo_ips_edi.nonce,tax_class:b},function(c){const d=a(`.edi-tax-class-table[data-tax-class="${b}"]`);d.html(c)})}a("select[name^=\"wpo_ips_edi_tax_settings\"][name$=\"[scheme]\"],   \t\tselect[name^=\"wpo_ips_edi_tax_settings\"][name$=\"[category]\"], \t\tselect[name^=\"wpo_ips_edi_tax_settings\"][name$=\"[reason]\"]").on("change",function(){let b=a(this).data("current"),c=a(this).find("option:selected").val(),d=a(this).closest("td, th").find(".current"),e=`${wpo_wcpdf_edi.new}: <code>${c}</code> <strong>(${wpo_wcpdf_edi.unsaved})</strong>`,f=`${wpo_wcpdf_edi.code}: <code>${b}</code>`;if(c===b?d.html(f):d.html(e),a(this).attr("name").endsWith("[reason]")){let b=wpo_wcpdf_edi.remarks.reason[c];b?a(this).closest("tr").find(".remark").html(b):a(this).closest("tr").find(".remark").html("")}});const d=a(".edi-tax-class-table"),e=a(".edi-tax-class-select");e.on("change",b),b(),a("#edi-show-changelog").on("click",function(b){b.preventDefault(),a("#edi-standard-changelog").slideToggle()}),a(".button-edi-save-taxes").on("click",function(b){b.preventDefault();const d=a(this),e=d.data("nonce"),f=d.data("action"),g=d.closest("form#wpo-wcpdf-settings"),h=g.serialize(),i=h+"&action="+encodeURIComponent(f)+"&nonce="+encodeURIComponent(e),j=a("#edi-tax-save-notice");a.post(wpo_ips_edi.ajaxurl,i,function(a){const b=a.data||"Unknown response.";let d="notice";d+=a.success?" notice-success":" notice-error",j.removeClass().addClass(d).html(`<p><strong>${b}</strong></p>`).slideDown(),setTimeout(function(){j.slideUp()},5e3),a.success&&c()})})});